DrJava Plug-in for Eclipse Development Tips -----


How to compile and package the plug-in:

 - Adapt "eclipse.sh" to match your system.
 - Run "source eclipse.sh"
 - Run "ant clean-eclipse package-eclipse"
   - This will generate a zip file in plugins/eclipse/packages
   - Unzip this to the plugins directory of your Eclipse installation to run.


How to commit changes:

 - Note: these are temporary instructions.  DO NOT USE "ant commit"!
 - Change to the plugins/eclipse directory and run "cvs commit".
 - Commit the build.xml if the version number has changed.
 - If it's a release, tag the plugins/eclipse directory.
 - To do:
   - The ant script needs to be modified to work at the top level.
     Ideally, all DrJava development could be done from that build.xml,
     and src/edu/rice/cs/drjava/build.xml could be deleted.
     A commit-eclipse target should be created, which would run the tests.


How to run the plug-in tests:

 - The tests create Eclipse objects, which require extra libraries.
   There is currently no ant target for running the plug-in tests,
   so it's best to run them by hand.
 - To do:
   - Add instructions for specifying these libraries to this document.


How to update the version number:

 - Edit plugins/eclipse/plugin.xml:
   - Change version attribute in the plugin tag.
 - Edit build.xml in top level:
   - Change eclipse_plugin_version property to new version.


How to add a preference to the plug-in:

 - Add a constant to DrJavaConstants
 - In DrJavaPreferencePage:
   - Add a field in createFieldEditors()
 - Add a default value to EclipsePlugin
 - Add an IPropertyChangeListener to the PreferenceStore
   (EclipsePlugin.getDefault().getPreferenceStore())
   - Specifically, in InteractionsController:
     - Add a variable to remember preference
     - Make action dependent on variable
     - Add a line to _updatePreferences


 Special note for font preferences:
  - Fonts are added to FontRegistry in plugin.xml (via an extension point)
  - Use JFaceResources to access the FontRegistry
    (see InteractionsController, InteractionsView)

